BlocksはiOS4.0以降で使うことの出来る機能で、他のプログラミング言語ではクロージャやラムダ式と呼ばれるものです。
通信完了後に実行したい、アニメーション完了後に実行したい、あるいは配列のソートを行う時の順序の判定として使いたい、などのように様々な箇所で用いることができます。この章では、このBlocksの使い方と注意すべきポイントについて説明します。


# Blocksの定義

### Blocksの構文

Blocksの構文は以下のようになります
```
^戻り値の型(引数,..){ 式 }
```
と書いても、分かりづらいのでいくつか例を紹介します。

```
^BOOL(int a){ return a < 0; } // 基本的な使い方1

^int(NSString *str){ return str.length; } // 基本的な使い方2

// 返り値のないものも可能
^void(NSString *str){ NSLog("%@", str);}
^(NSString *str){ NSLog("%@", str);} // 返り値がない場合は省略できる


// 引数を取らない場合
^int(void){ return 10; }

// 返り値も引数もない場合
^void(void){ NSLog(@"blocks"); }
^{ NSLog(@"blocks"); } // 引数も返り値も省略できる

```


### Blocksの使い方


# 自動変数の振る舞い

# __weak, __block


# 注意点、リーク

## 宿題として
perlにあるgrepやmapはNSArrayにはありません。grepを行うNSArrayの拡張 NSArray(grep)を作ってください。

使用例
```
NSArray *before = @[ @"hoge", @"fuga", @"piyo", @1, @2, @3, @"foo", @"bar"];
NSArray *after = [before grep:^BOOL(id obj) {
                     return [obj isKindOfClass:[NSString class]];
                 }];
NSLog(@"%@", after); // @"hoge", @"fuga", @"piyo", @"foo", @"bar"
```