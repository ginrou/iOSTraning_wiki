[UINavigationController Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html) | [View Controller Programming Guide for iOS](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewControllerPGforiOS.pdf)

# 概要

![navigationController1](https://raw.github.com/mixi-inc/iOSTraining/master/Doc/Images/2.1/navigationController1.png)

UINavigationController は UIViewController を階層的に管理するコンテナです。複数の UIViewController はスタックで管理されます。またその各 UIViewController にナビゲートするインタフェース（UINavigationBar, UIToolBar）も管理します。

![navigationController2](https://raw.github.com/mixi-inc/iOSTraining/master/Doc/Images/2.1/navigationCOntroller2.png)

UINavigationController における重要な property と method は以下の通りです。

- topViewController - スタックのトップにいる viewController
- viewControllers - viewController が含まれている NSArray
- pushViewController:animated: - viewControllers スタックに push され画面遷移します
- popViewController:Animated: - スタックから pop され画面遷移します
- delegate methods を実装することで画面遷移の通知を受け取れます

# 実装
## navigationController の表示、push

無限に push する画面遷移を実装し、今いる階層を表示しましょう。

MixiAppDelegate.m
```objective-c
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[MixiViewController alloc] initWithNibName:@"MixiViewController" bundle:nil];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:_viewController];
    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
}
```

MixiViewController.h
```objective-c
#import <UIKit/UIKit.h>

@interface MixiViewController : UIViewController

- (IBAction)pressPushButton:(id)sender;

@end
```

MixiViewController.m
```objective-c
- (void)viewDidLoad
{
    [super viewDidLoad];
	// Do any additional setup after loading the view, typically from a nib.
    self.title = [NSString stringWithFormat:@"%d", [self.navigationController.viewControllers count]];
}

- (IBAction)pressPushButton:(id)sender
{
    [self.navigationController pushViewController:[[MixiViewController alloc] init] animated:YES];
}
```

**確認**　: navigationController.viewControllers にスタックされていることを、ログで確認してください。

###**問題**
アプリ起動時で 5 階層目にいるように実装してください。
（HINT:<font color="#ffffff">setViewControllers:</font>）

## NavigationBar
[UINavigationBar Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)

[UINavigationItem Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html)

UINavigationBar は UINavigationItem を管理するためのコンテナです。UINabigationItem は各 ViewController が持っていて、NavigationBar に表示させる情報を管理しています。

![UINavigationBar](https://raw.github.com/mixi-inc/iOSTraining/master/Doc/Images/2.1/UINavigationBar.png)

NavigationBar 右上方にボタンを設置してみましょう。ボタンタップで pop を実装しましょう。

MixiVIewController.m
```objective-c
- (void)viewDidLoad
{
    [super viewDidLoad];
	// Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.title = [NSString stringWithFormat:@"%d", [self.navigationController.viewControllers count]];

    UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"pop" style:UIBarButtonItemStylePlain target:self action:nil];
    self.navigationItem.rightBarButtonItem = rightButton;
}

- (void)pressPushPopButton
{
    [self.navigationController popViewControllerAnimated:YES];
}
```